function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}function googleOnLoadCallback(){angular.bootstrap(document,["sanityApp"])}(function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)})(),function(){function i(b,i){var j=this;this.get=function(e,f){var g=b.defer();i.gapi[c].setApiKey(i.apiKey);if(typeof i.gapi[c][a]!==d){var h=i.gapi[c][a][e].list(f);i.gapi[c][a][e].list(f).execute(function(a){g.resolve(a)})}else g.reject();return g.promise},this[e]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(e,b)},this[h]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(h,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:g,id:a.join()})}}var a="youtube",b="googleApi",c="client",d="undefined",e="subscriptions",f="snippet",g=!0,h="channels";angular.module(a,[b]),i.$inject=["$q",b],angular.module(a).service("ytData",i)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function h(h,i){var j=this;this.get=function(d,e){var f=h.defer();i.gapi[b].setApiKey(i.apiKey);if(typeof i.gapi[b][a]!==c){var g=i.gapi[b][a][d].list(e);i.gapi[b][a][d].list(e).execute(function(a){f.resolve(a)})}else f.reject();return f.promise},this[d]=function(a){var b={part:e,mine:f,maxResults:50};return typeof a!=c&&a!==null&&(b.page=a),j.get(d,b)},this[g]=function(a){var b={part:e,mine:f,maxResults:50};return typeof a!=c&&a!==null&&(b.page=a),j.get(g,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:f,id:a.join()})}}var a="youtube",b="client",c="undefined",d="subscriptions",e="snippet",f=!0,g="channels";angular.module(a,[]),h.$inject=["$q","googleApi"],angular.module(a).service("ytData",h)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function i(b,i){var j=this;this.get=function(e,f){var g=b.defer();i.gapi[c].setApiKey(i.apiKey);if(typeof i.gapi[c][a]!==d){var h=i.gapi[c][a][e].list(f);i.gapi[c][a][e].list(f).execute(function(a){g.resolve(a)})}else g.reject();return g.promise},this[e]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(e,b)},this[h]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(h,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:g,id:a.join()})}}var a="youtube",b="googleApi",c="client",d="undefined",e="subscriptions",f="snippet",g=!0,h="channels";angular.module(a,[b]),i.$inject=["$q",b],angular.module(a).service("ytData",i)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},
that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function i(b,i){var j=this;this.get=function(e,f){var g=b.defer();i.gapi[c].setApiKey(i.apiKey);if(typeof i.gapi[c][a]!==d){var h=i.gapi[c][a][e].list(f);i.gapi[c][a][e].list(f).execute(function(a){g.resolve(a)})}else g.reject();return g.promise},this[e]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(e,b)},this[h]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(h,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:g,id:a.join()})}}var a="youtube",b="googleApi",c="client",d="undefined",e="subscriptions",f="snippet",g=!0,h="channels";angular.module(a,[b]),i.$inject=["$q",b],angular.module(a).service("ytData",i)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function i(b,i){var j=this;this.get=function(e,f){var g=b.defer();i.gapi[c].setApiKey(i.apiKey);if(typeof i.gapi[c][a]!==d){var h=i.gapi[c][a][e].list(f);i.gapi[c][a][e].list(f).execute(function(a){g.resolve(a)})}else g.reject();return g.promise},this[e]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(e,b)},this[h]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(h,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:g,id:a.join()})}}var a="youtube",b="googleApi",c="client",d="undefined",e="subscriptions",f="snippet",g=!0,h="channels";angular.module(a,[b]),i.$inject=["$q",b],angular.module(a).service("ytData",i)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function i(b,i){var j=this;this.get=function(e,f){var g=b.defer();i.gapi[c].setApiKey(i.apiKey);if(typeof i.gapi[c][a]!==d){var h=i.gapi[c][a][e].list(f);i.gapi[c][a][e].list(f).execute(function(a){g.resolve(a)})}else g.reject();return g.promise},this[e]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(e,b)},this[h]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(h,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:g,id:a.join()})}}var a="youtube",b="googleApi",c="client",d="undefined",e="subscriptions",f="snippet",g=!0,h="channels";angular.module(a,[b]),i.$inject=["$q",b],angular.module(a).service("ytData",i)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id
,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function i(b,i){var j=this;this.get=function(e,f){var g=b.defer();i.gapi[c].setApiKey(i.apiKey);if(typeof i.gapi[c][a]!==d){var h=i.gapi[c][a][e].list(f);i.gapi[c][a][e].list(f).execute(function(a){g.resolve(a)})}else g.reject();return g.promise},this[e]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(e,b)},this[h]=function(a){var b={part:f,mine:g,maxResults:50};return typeof a!=d&&a!==null&&(b.page=a),j.get(h,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:g,id:a.join()})}}var a="youtube",b="googleApi",c="client",d="undefined",e="subscriptions",f="snippet",g=!0,h="channels";angular.module(a,[b]),i.$inject=["$q",b],angular.module(a).service("ytData",i)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}(),function(){function d(){var a=this;this.clientId="950592637430.apps.googleusercontent.com",this.apiKey="AIzaSyCs378KoxX1cX5_TTa5W65tTG396AkId0A",this.scopes="https://www.googleapis.com/auth/youtube",this[b]=gapi,this.q={},this[c]=function(){var c=a.q.defer();return this[b].auth.authorize({client_id:this.clientId,scope:this.scopes,immediate:!1},function(d){d&&!d.error?a[b].client.load("youtube","v3",function(a){c.resolve(a)}):c.reject()}),c.promise},this.checkAuth=function(){return this[c]()},this.authorize=function(){return this[c]()},this.load=function(){this[b].load(),this[b].client.setApiKey(this.apiKey)},this.$get=["$q",function(a){var b=new d;return b.q=a,b}]}var a="googleAPI",b="gapi",c="connect";angular.module(a,[]),angular.module(a).provider("googleApi",d)}(),function(){function h(h,i){var j=this;this.get=function(d,e){var f=h.defer();i.gapi[b].setApiKey(i.apiKey);if(typeof i.gapi[b][a]!==c){var g=i.gapi[b][a][d].list(e);i.gapi[b][a][d].list(e).execute(function(a){f.resolve(a)})}else f.reject();return f.promise},this[d]=function(a){var b={part:e,mine:f,maxResults:50};return typeof a!=c&&a!==null&&(b.page=a),j.get(d,b)},this[g]=function(a){var b={part:e,mine:f,maxResults:50};return typeof a!=c&&a!==null&&(b.page=a),j.get(g,b)},this.channelvideos=function(a){return j.get("activities",{part:"contentDetails",channelId:a,maxResults:20})},this.videos=function(a){return j.get("videos",{part:"snippet,contentDetails,status,statistics",mine:f,id:a.join()})}}var a="youtube",b="client",c="undefined",d="subscriptions",e="snippet",f=!0,g="channels";angular.module(a,["googleAPI"]),h.$inject=["$q","googleApi"],angular.module(a).service("ytData",h)}(),function(){function kb(a,b,c){c.config({name:"SanityGrid",version:1,storeName:O,description:"The grid for people who like to stay sane"}),a.otherwise("/ready"),b.state(I,{url:"/ready",views:{main:{templateUrl:"templates/start.html"}}}).state(C,{url:"/list",views:{main:{templateUrl:"templates/videos.html"},footer:{templateUrl:"templates/footer.html"}}})}function lb(a){a.apiReady=p,$[G](a[d])&&(a[d]={hidewatched:j,hidemuted:p,theme:O}),typeof a[f]=="object"&&(a[f]=[]),$[G](a[r])&&(a[r]={},a[r][N]={},a[r].zipped={}),$[G](a[c])&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[]),typeof a[c][M]==b&&(a[c]={},a[c].count=0,a[c].caught=0,a[c][M]=[],a[c][e]={}),typeof a[c][e]==b&&(a[c][e]={}),$.isArray(a.videocache)&&(a.videocache={}),typeof a[d][u]==b&&(a[d][u]=Math.random().toString(36).substr(2),a[d][V]=j),typeof a[d][h]==b&&(a[d][h]=100)}function mb(a,b,c,e){a[Q]=["YEAH BOIIIII!!!","Well, if you say so, I guess...","My body is ready for sanity!","Let's go!"];var f=Math.floor(Math.random()*a[Q][g]);a.gotime=a[Q][f],a.selectUserid=function(a){a===j?c.go(I):c.go(C)},a.connect=function(){e.authorize()[A](function(){c.go(C)})},b.userid&&(a.start=j,b[d][K]=j,e.checkAuth()[A](function(){c.go(C)}))}function nb(a,k,l,n,q,s,u){k[e]=[],k[P]=[],k[f]=[],k[Y]=[],k.archive=[],k.archiveids=[],k.trash=[],k.trashids=[],a.userid="";var v=[],z=function(){a[d][K]=j,s[S](),B()[A](function(b){a.userid=b,Z()[A](function(){C()[A](function(a){s[I]()})})},function(){q.go(I)})},B=function(a){var c=l[F]();return typeof a==b&&(a=J),u[e]()[A](function(a){v[L]({id:a[D][0].id,title:a[D][0][m][E]}),c[o](a[D][0].id)},function(){c.reject()}),c[y]},C=function(){var a=l[F](),b=0,c=k[e][g]-1;for(var d=0;d<k[e][g];d++)G(k[e][d][t])[A](function(e){b+=e,d===c&&a[o](b)}(d));return a[y]},G=function(a){var b=l[F]();return u.channelvideos(a)[A](function(a){Q(a[D])[A](function(a){b[o](a)})}),b[y]},Q=function(a){var c=l[F]();return typeof a!=b?R(a)[A](function(a){T(a)[A](function(a){c[o](a)})}):c.reject(),c[y]},R=function(a){var c=l[F](),d=[],e=a[g]-1;for(var f=0;f<a[g];f++){if(typeof a[f][x]==b)continue;typeof a[f][x].upload!=b?(d[L](a[f][x].upload.videoId),f===e&&c[o](d)):f===e&&c[o](d)}return c[y]},T=function(a){var c=l[F]();return u[f](a)[A](function(a){if(typeof a[D]!=b){var d=a[D][g]-1,e=0;for(var f=0;f<a[D][g];f++)U(a[D][f])&&e++,f===d&&c[o](e)}else c[o](0)}),c[y]},U=function(b){var d={id:b.id,link:"https://www.youtube.com/watch?v="+b.id,title:b[m][E],thumbnail:{"default":b[m][X][O].url,medium:b[m][X].medium.url,high:b[m][X].high.url},channelId:b[m][t],author:b[m].channelTitle,authorlink:"https://www.youtube.com/channel/"+b[m][t],published:b[m].publishedAt,duration:b[x].duration},g=$.inArray(b.id,k[Y]);if(g!=-1)return J;var h=j;return a[c][e].hasOwnProperty(d[t])&&$.each(a[c][e][b[t]][c],function(a,c){b[E].indexOf(c.string)!=-1&&(h=p)}),h&&a[c].caught++,h?(k.trash[L](d),k.trashids[L](d.id)):(k[f][L](d),k[Y][L](d.id)),p},V=function(){var a=k[f][g];for(i=0;i<a;i++)typeof k[f][i].hash==b&&(k[f][i].hash=k[f][i].id),typeof k[f][i].$$hashKey!=b&&delete k[f][i].$$hashKey,k[f][i].id=i,typeof k[f][i][H]==b&&(k[f][i][H]=k[f][i].muted,k[f][i].muted=j)},Z=function(a){var c=l[F]();return typeof a==b&&(a=J),u.subscriptions(a)[A](function(b){_(b,a)[A](function(){c[o]()})}),c[y]},_=function(a,c){var d=l[F]();return typeof c==b&&(c=""),typeof a[D]!=b?ab(a[D])[A](function(){k[e][g]<a.pageInfo.totalResults&&a[fb]!=c?Z(a[fb])[A](function(){d[o]()}):d[o]()}):d[o](),d[y]},ab=function(a){var b=l[F](),c=a[g]-1;for(var d=0;d<a[g];d++)$.inArray(a[d].id,k[P])==-1&&(k[e][L]({id:a[d].id,title:a[d][m][E],description:a[d][m].description,channelId:a[d][m].resourceId[t]}),k[P][L](a[d].id)),d===c&&b[o]();return b[y]},bb=function(){s[S](),a[c].caught=0,C()},cb=function(){a[d][K]===p?$(db).css({height:n.height()}):$(db).css({height:"40px"})},eb=function(){};k.refresh=function(){s[S](),s.update(),bb()},k.hideChannel=function(b){var c=$.inArray(b,a[w][N]);c!=-1?a[w][N]=a[w][N].splice(c,1):a[w][N][L](b)},k.togglesidebar=function(){a[d][K]=!a[d][K],cb()},k.videoFilter=function(b){if(a[r][N][b[t]]==="1")return J;var d=j;return $.each(a[c][M],function(a,c){b[E].indexOf(c.string)!=-1&&(d=p)}),b},k.setLimit=function(b){a[d][h]=Number(a[d][h])+Number(b),a[d][h]<1&&(a[d][h]=5)};var gb=function(){a[d][h]<k[f][g]?(k[W]=parseInt(100*a[d][h]/k[f][g]),k.abslength=a[d][h]):(k[W]=100,k.abslength=k[f][g])};k.$watch(f,gb,p),k.$watch(d,gb,p),k[W]=gb(),angular.element(n).bind("keyup",function(a){a.which===82&&k.refresh()}),z(),cb()}function ob(a,b){b.cancel=function(){b.$hide()},b.redoadblocksecret=function(){a[d][u]=Math.random().toString(36).substr(2)},b.removeFilter=function(b,d){b[g]?(a[c][e][b][c].splice(d,1),a[c][e][b][c][g]===0&&delete a[c][e][b]):a[c][M].splice(d,1),a[c].count--}}function pb(a,d){d[v][jb]?d[B]={title:d[v][E],channel:d[v][jb],author:d[v].author,authorid:d[v][jb]}:d[B]={title:d[v][E],channel:d[v].author,author:d[v].author,authorid:d[v].author},d.cancel=function(){d.$hide()},d.ok=function(){d[B][T][g]?(typeof a[c][e][d[B][T]]==b&&(a[c][e][d[B][T]]={title:d[B][T],filters:[]}),a[c][e][d[B][T]][c][L]({string:d[B][E]})):a[c][M][L]({string:d[B][E]}),a[c].count++,d.$hide()}}function qb(a){a.tabs=[],a.navType="pills",a[ib]="firefox",a.adblockswitch=function(b){a[ib]=b}}function rb(a){a.oneAtATime=p}function sb(a,b){var c=function(a,b){var c=a.split("."),d=b.split(".");for(var e=0;e<c[g];++e)if(c[e]>d[e])return p;return j},d;this.resetErrors=function(){if(b.forbidden==1||b.notfound==1)b.forbidden=0,b.notfound=0},this.appinfo=function(a){var b="info.json";$.getJSON(b).fail(function(b,c,d){a(d,b.status)}).done(function(b){a(b,200)})},this[Z]=function(a){var b=new Gh3.User("daviddeutsch"),c=new Gh3.Repository("yt-sanegrid",b);c.fetch(function(b,c){b&&a(b,500)}),c.fetchClosedIssues(function(b,d){b&&a(b,500),a(c.getIssues(),200)})},that=this,this.update=function(){that.appinfo(function(a,d){if(!c(a[cb],b[bb][cb]))return;b[bb].update=a[cb],b[bb][z].outdated=p,b[bb][z].new=0,b[bb][z][E]="Fresh Update(s)!",that[Z](function(a,c){b[bb][z][C]=a,$.each(b[bb][z][C],function(a,c){var d=new Date(c.updated_at);d>b[bb].date?(b[bb][z][C][a].new=p,b[bb][z].new++):b[bb][z][C][a].new=j})})})},this.appinfo(function(a,c){b[bb]={version:a[cb],updates:{list:[]},date:new Date},that[Z](function(a,c){b[bb][z][C]=a})}),this[S]=function(){clearTimeout(d),b.status=1},this[I]=function(a){function c(){b.status=0}clearTimeout(d),a=a===J?500:j,a?d=setTimeout(c,a):c()}}function tb(a){var b;return{nowTime:0,initted:j,settings:{refreshMillis:6e4,allowFuture:j,strings:{prefixAgo:J,prefixFromNow:J,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},doTimeout:function(){b[_]=(new Date).getTime(),a(b.doTimeout,b[d].refreshMillis)},init:function(){this.initted===j&&(this.initted=p,this[_]=(new Date).getTime(),b=this,this.doTimeout(),this.initted=p)},inWords:function(a){function k(c,d){var e=$.isFunction(c)?c(d,a):c,f=b.numbers&&b.numbers[d]||d;return e.replace(/%d/i,f)}var b=this[d].strings,c=b.prefixAgo,e=b.suffixAgo;this[d].allowFuture&&a<0&&(c=b.prefixFromNow,e=b.suffixFromNow);var f=Math.abs(a)/1e3,g=f/60,h=g/60,i=h/24,j=i/365,l=f<45&&k(b.seconds,Math[hb](f))||f<90&&k(b.minute,1)||g<45&&k(b.minutes,Math[hb](g))||g<90&&k(b.hour,1)||h<24&&k(b.hours,Math[hb](h))||h<42&&k(b.day,1)||i<30&&k(b.days,Math[hb](i))||i<45&&k(b.month,1)||i<365&&k(b.months,Math[hb](i/30))||j<1.5&&k(b.year,1)||k(b.years,Math[hb](j)),m=b[gb]===undefined?" ":b[gb];return $.trim([c,l,e].join(m))}}}function ub(){return function(a){var c=a.split("M");c[0]=Number(c[0].slice(2)),typeof c[1]==b?c[1]=0:c[1]=Number(c[1].slice(0,-1));var d=Math.floor(c[0]/60),e=Math.floor(c[0]%60),f=c[1];return(d>0?d+":":"")+(e>0?(d>0&&e<10?"0":"")+e+":":"00:")+(f<10?"0":"")+f}}function vb(){return function(a){return(new Date(a)).getTime()}}function wb(a){return{restrict:"C",scope:{video:"="},templateUrl:"templates/item.html",controller:function(b,c){b.mute=function(){b[v].muted=!b[v].muted,b[v].muteddate=(new Date).toISOString()},b.watch=function(c){if(c.button==2)return;a(function(){b[H](j)},400)},c[d][V]?b.link=b[v].link+"&adblock="+c[d][u]:b.link=b[v].link,b[H]=function(a){if(b[v][H]&&!a)return;b[v][H]=!b[v][H],b[v].watcheddate=(new Date).toISOString()}}}}function xb(a){return{replace:p,restrict:"EA",scope:{fromTime:"@"},link:{post:function(b,c,d){b[U]=a,b[U].init(),b.$watch("timeago.nowTime-fromTime",function(a){b[U][_]!==undefined&&(a=b[U][_]-b.fromTime,$(c).text(b[U].inWords(a)))})}}}}function yb(){return function(a,b,c){b.bind("click",function(){this.select()})}}var a="sanityApp",b="undefined",c="filters",d="settings",e="channels",f="videos",g="length",h="videolimit",j=!1,k="module",l="$rootScope",m="snippet",n="$inject",o="resolve",p=!0,q="controller",r="channelstate",s="$scope",t="channelId",u="adblocksecret",v="video",w="channeloptions",x="contentDetails",y="promise",z="updates",A="then",B="filter",C="list",D="items",E="title",F="defer",G="isEmptyObject",H="watched",I="ready",J=null,K="sidebar",L="push",M="global",N="hidden",O="default",P="channelids",Q="gotimelist",R="timeAgo",S="loading",T="channel",U="timeago",V="adblockoverride",W="percentage",X="thumbnails",Y="videoids",Z="appupdates",_="nowTime",ab="directive",bb="info",cb="version",db=".sidebar",eb="$timeout",fb="nextPageToken",gb="wordSeparator",hb="round",ib="adblockadvice",jb="authorid";angular[k](a,["ngAnimate","ui.router","mgcrea.ngStrap","ngSocial","localStorage","LocalForageModule","googleAPI","youtube"]),kb[n]=["$urlRouterProvider","$stateProvider","$localForageProvider"],angular[k](a).config(kb),lb[n]=[l],angular[k](a).run(lb),mb[n]=[s,l,"$state","googleApi"],angular[k](a)[q]("StartCtrl",mb),nb[n]=[l,s,"$q","$document","$state",a,"ytData"],angular[k](a)[q]("AppRepeatCtrl",nb),ob[n]=[l,s],angular[k](a)[q]("SettingsModalCtrl",ob),pb[n]=[l,s],angular[k](a)[q]("FilterModalCtrl",pb),qb[n]=[s],angular[k](a)[q]("SettingsTabsCtrl",qb),rb[n]=[s],angular[k](a)[q]("SettingsAccordionCtrl",rb),sb[n]=["$q",l],angular[k](a).service(a,sb),tb[n]=[eb],angular[k](a).service(R,tb),angular[k](a)[B]("duration",ub),angular[k](a)[B]("timestamp",vb),wb[n]=[eb],angular[k](a)[ab]("videoItem",wb),xb[n]=[R],angular[k](a)[ab](R,xb),angular[k](a)[ab]("selectOnClick",yb)}();